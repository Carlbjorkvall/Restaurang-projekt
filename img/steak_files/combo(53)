YUI.add("hermes-template-notifications-panel",function(n,t){var a=n.Template.Handlebars.revive({1:function(n,t,a,e,s){var l;return"\t\twidth: "+n.escapeExpression("function"==typeof(l=null!=(l=a.width||(null!=t?t.width:t))?l:a.helperMissing)?l.call(null!=t?t:{},{name:"width",hash:{},data:s}):l)+"px;\n"},3:function(n,t,a,e,s){var l;return"\t\theight: "+n.escapeExpression("function"==typeof(l=null!=(l=a.height||(null!=t?t.height:t))?l:a.helperMissing)?l.call(null!=t?t:{},{name:"height",hash:{},data:s}):l)+"px;\n"},5:function(n,t,a,e,s){var l;return'\t\t\t\t\t\t<span class="count-in-parens">('+n.escapeExpression(n.lambda(null!=(l=null!=t?t.unreadCounts:t)?l.main:l,t))+")</span>\n"},7:function(n,t,a,e,s){var l;return'\t\t\t\t\t<span class="count-in-parens">('+n.escapeExpression(n.lambda(null!=(l=null!=t?t.unreadCounts:t)?l.admin:l,t))+")</span>\n"},9:function(n,t,a,e,s){return"\t\t"+n.escapeExpression((a.outlet||t&&t.outlet||a.helperMissing).call(null!=t?t:{},null!=t?t["notification-banner-view"]:t,{name:"outlet",hash:{},data:s}))+"\n"},compiler:[7,">= 4.0.0"],main:function(n,t,a,e,s){var l,i=null!=t?t:{},o=a.helperMissing,r=n.escapeExpression;return'<div class="notifications-panel"\n\tstyle="\n'+(null!=(l=a.if.call(i,null!=t?t.width:t,{name:"if",hash:{},fn:n.program(1,s,0),inverse:n.noop,data:s}))?l:"")+(null!=(l=a.if.call(i,null!=t?t.height:t,{name:"if",hash:{},fn:n.program(3,s,0),inverse:n.noop,data:s}))?l:"")+'\t">\n\t<div class="nav-container">\n\t\t<div class="tabs disabled">\n\t\t\t<span role="button" class="tab selected" data-tab-id="main">\n\t\t\t\t<span>\n\t\t\t\t\t'+r((a.intlMessage||t&&t.intlMessage||o).call(i,{name:"intlMessage",hash:{intlName:"notifications.NOTIFICATIONS"},data:s}))+"\n"+(null!=(l=a.if.call(i,null!=(l=null!=t?t.unreadCounts:t)?l.main:l,{name:"if",hash:{},fn:n.program(5,s,0),inverse:n.noop,data:s}))?l:"")+'\t\t\t\t</span>\n\t\t\t\t<span class="label-alpha">'+r((a.intlMessage||t&&t.intlMessage||o).call(i,{name:"intlMessage",hash:{intlName:"common.ALPHA"},data:s}))+'</span>\n\t\t\t</span>\n\t\t\t<span role="button" class="tab" data-tab-id="admin">\n\t\t\t\t'+r((a.intlMessage||t&&t.intlMessage||o).call(i,{name:"intlMessage",hash:{intlName:"notifications.GROUPS_YOU_ADMIN"},data:s}))+"\n"+(null!=(l=a.if.call(i,null!=(l=null!=t?t.unreadCounts:t)?l.admin:l,{name:"if",hash:{},fn:n.program(7,s,0),inverse:n.noop,data:s}))?l:"")+'\t\t\t</span>\n\t\t</div>\n\t\t<div class="actions">\n\t\t\t<a class="action settings-link" href="/account/email">\n\t\t\t\t<svg class="icon"><use xlink:href="#icon-settings"></use></svg>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n'+(null!=(l=a.if.call(i,null!=t?t.showBanner:t,{name:"if",hash:{},fn:n.program(9,s,0),inverse:n.noop,data:s}))?l:"")+'\t<div class="list-container">\n\t\t'+r((a.outlet||t&&t.outlet||o).call(i,null!=t?t["notifications-list-view"]:t,{name:"outlet",hash:{},data:s}))+'\n\t</div>\n\t<a class="foot-link" href="/notifications">\n\t\t'+r((a.intlMessage||t&&t.intlMessage||o).call(i,{name:"intlMessage",hash:{intlName:"notifications.VIEW_ALL_NOTIFICATIONS"},data:s}))+"\n\t</a>\n</div>\n"},useData:!0}),e={};n.Array.each([],function(t){var a=n.Template.get("hermes/"+t);a&&(e[t]=a)}),n.Template.register("hermes/notifications-panel",function(t,s){return s=s||{},s.partials=s.partials?n.merge(e,s.partials):e,a(t,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("template-lib-helper",function(e,t){var r=require("hermes-core/flog")(t);e.TemplateLibraryHelper=function(t,l){var n=l&&l.localizeLib?l.localizeLib:e.mix({langBundles:["common"]},e.Localizable),i={getTemplate:function(l,i){var o,a=e.Template.get("hermes/"+l),p=n.getLangBundles();if(p.locales=t.lang||n.defaultLang,"function"!=typeof a)throw r.error("Template not found",{topic:this.name,template:l}),new Error("Template not found: "+l);return t.flipper&&(o=t.flipper),function(e){return!(e=e||{}).flippers&&o&&(e.flippers=o.toJSON()),i&&(e.isMobile=i.isMobile,e.cspNonce=i.cspNonce),a(e,{data:{intl:p,flippers:e.flippers}})}}};return e.augment(i,e.EventTarget),i}},"@VERSION@",{requires:["event-custom"]});YUI.add("hermes-template-join-group-invite-form",function(e,a){var t=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,t,r,n){return'<div class="send-invitation">\n\t<p>'+e.escapeExpression((t.intlMessage||a&&a.intlMessage||t.helperMissing).call(null!=a?a:{},{name:"intlMessage",hash:{intlName:"groups.GROUP_INVITE_ONLY_DESC"},data:n}))+'</p>\n\t<textarea class="group-invite-form"></textarea>\n</div>\n'},useData:!0}),r={};e.Array.each([],function(a){var t=e.Template.get("hermes/"+a);t&&(r[a]=t)}),e.Template.register("hermes/join-group-invite-form",function(a,n){return n=n||{},n.partials=n.partials?e.merge(r,n.partials):r,t(a,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("group-status-helper",function(e,t){require("hermes-core/flog")(t);var n=e.mix({langBundles:["common","groups"]},e.Localizable);e.GroupStatusHelper=function(t,o){var i,s,r=o.groupId,a=new e.TemplateLibraryHelper(t,{localizeLib:n}),u={load:function(){var n=this;return e.on("groupStatusHelper:groupStatusChanged",function(e){e.groupId===r&&n.update()}),o.useSearchModel?t.getModel("search-group-models",r).then(function(e){s=e,n.convertGroupInfoModel(e),n.groupRemoteMethods={join:e.registry.remote.join,leave:e.registry.remote.leave}}):t.getModel("group-info-models",r).then(function(e){return s=e,n.convertGroupInfoModel(e),n.groupRemoteMethods={join:e.registry.remote.join,leave:e.registry.remote.leave},e})},initiateJoinGroup:function(){var o=this.getJoinStatus(),s=i.title,r=i.id;if(o.canJoin&&!o.signedIn)return this.signInAndRedirectToGroup(r);if(o.canJoin&&!o.requiresRequest)return this.joinGroup(r);if(o.canJoin&&o.isInvited)return this.joinGroup(r);if(!o.hasJoined&&o.hasRequested&&o.requiresRequest){return new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"groups.GROUP_INVITE_ONLY_HEADER",groupName:s}),message:n.intlMessage({intlName:"groups.GROUP_INVITE_PENDING",groupName:s}),actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1}).show(),e.Promise.resolve()}return o.hasJoined||o.hasRequested||!o.requiresRequest?o.hasJoined?(this.fire("groupJoined"),e.fire("groupStatusHelper:groupJoined",{groupId:r}),e.Promise.resolve()):void 0:this.promptForRules().then(e.bind(function(){this.showInviteRequestModal.call(this,r)},this),e.bind(function(){},this))},initiateLeaveGroup:function(){this.showLeaveGroupModal()},showLeaveGroupModal:function(){var o=i.title,s=i.id,r=null,a="";1===i.memberCount&&i.isMember?a=n.intlMessage({intlName:"groups.GROUPS_LEAVE_WARNING_LAST_MEMBER",title:o}):i.isAdmin?(a=n.intlMessage({intlName:"groups.GROUPS_LEAVE_WARNING_ADMIN",title:o}),a+=n.intlHTMLMessage({intlName:"groups.GROUPS_LEAVE_WARNING_REMOVE_PHOTOS"})):(a=n.intlMessage({intlName:"groups.GROUPS_LEAVE_WARNING",title:o}),a+=n.intlHTMLMessage({intlName:"groups.GROUPS_LEAVE_WARNING_REMOVE_PHOTOS"})),(r=new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"groups.GROUPS_LEAVE_WARNING_TITLE",title:o}),htmlMessage:a,actionButtonLabel:n.intlMessage({intlName:"groups.GROUPS_LEAVE_WARNING_LEAVE_BUTTON"}),cancelButtonLabel:n.intlMessage({intlName:"groups.GROUPS_LEAVE_WARNING_CANCEL_BUTTON"}),overlayClassList:"over-droparound-under-modal"})).on("actionClick",e.bind(function(){var e=r.get("container").one("input"),t=e&&e.getDOMNode().checked;this.leaveGroup(s,t)},this)),r.show()},joinGroup:function(){var o=this;return this.promptForRules().then(e.bind(function(){return this.groupRemoteMethods.join({groupModel:s,acceptRules:!0},t).then(function(t){return o.convertGroupInfoModel(t),o.fire("groupJoined"),e.fire("groupStatusHelper:groupJoined",{groupId:r}),e.fire("groupStatusHelper:groupStatusChanged",{groupId:r}),t},function(o){new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"common.OOPS"}),message:n.intlMessage({intlName:"groups.GROUP_JOIN_ERROR"}),actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1}).show()})},this),e.bind(function(e){},this))},leaveGroup:function(o,i){var r=this;this.groupRemoteMethods.leave({groupModel:s,deletePhotos:!!i},t).then(function(t){return r.convertGroupInfoModel(t),r.fire("groupLeft"),e.fire("groupStatusHelper:groupLeft",{groupId:o}),e.fire("groupStatusHelper:groupStatusChanged",{groupId:o}),t},function(o){new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"common.OOPS"}),message:n.intlMessage({intlName:"groups.GROUP_LEAVE_ERROR"}),actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1}).show()})},signInAndRedirectToGroup:function(o){var s,r=this,a=e.url("/groups/")+o,u=n.intlMessage({intlName:"groups.SIGN_IN_BEFORE_JOIN_MESSAGE",name:i.title}),l=n.intlMessage({intlName:"groups.SIGN_IN_AND_JOIN"}),g=n.intlMessage({intlName:"common.CANCEL"});if(this.signedOutTest)return this.showSignUpModal(o);(s=new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"groups.SIGN_IN_BEFORE_JOIN_TITLE"}),htmlMessage:u,actionButtonLabel:l,cancelButtonLabel:g})).on("actionClick",function(){e.rapidTracker.beacon(r.name,"joinModalSigninClick"),e.SigninHelper.addPendingJoinGroup({id:o},{postLoginUrl:a})}),s.on("cancelClick",function(t){e.rapidTracker.beacon(r.name,"joinModalCancelClick")}),s.show()},showSignUpModal:function(o){var s,r=e.url("/groups/")+o,a=n.intlMessage({intlName:"groups.SIGN_IN_BEFORE_JOIN_TITLE"}),u=n.intlMessage({intlName:"groups.SIGN_UP_AND_JOIN_MESSAGE",name:i.title});(s=new e.Views.SignUpModal({appContext:t,signUpHeaderClass:"avatar group big",signUpHeaderImage:void 0!==this.groupModel.getValue("group")?this.groupModel.getValue("group").getValue("bestIconURL"):this.groupModel.getValue("bestIconURL"),signUpTitle:a,signUpMessage:u,beaconPrefix:"join"})).on("signUpClick",function(t){e.SigninHelper.signUpPendingJoinGroup({id:o},{postLoginUrl:r})}),s.on("signInClick",function(t){e.SigninHelper.addPendingJoinGroup({id:o},{postLoginUrl:r})}),s.show()},promptForRules:function(){return new e.Promise(e.bind(function(o,s){var r=i.secureRules,a=null;r?((a=new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"groups.GROUP_JOIN_RULES_DIALOG_TITLE"}),htmlMessage:n.intlMessage({intlName:"groups.GROUP_JOIN_RULES_DIALOG_MESSAGE"})+"<br /><pre>"+r+"</pre>",showBodyLines:!1,actionButtonLabel:n.intlMessage({intlName:"groups.GROUP_JOIN_RULES_DIALOG_ACCEPT"}),cancelButtonLabel:n.intlMessage({intlName:"groups.GROUP_JOIN_RULES_DIALOG_DECLINE"})})).on("actionClick",function(){setTimeout(function(){o()},500)}),a.on("cancelClick",function(){setTimeout(function(){s()},500)}),a.show()):o()},this))},showInviteRequestModal:function(s){var r,u=n.intlMessage({intlName:"groups.GROUP_INVITE_ONLY_SEND"}),l=n.intlMessage({intlName:"common.CANCEL"}),g=a.getTemplate("join-group-invite-form",o.viewParams);(r=new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"groups.GROUP_INVITE_ONLY_HEADER",groupName:e.Escape.html(i.title)}),htmlMessage:g({groupName:i.title}),actionButtonLabel:u,cancelButtonLabel:l,overlayClassList:"over-droparound-under-modal"})).on("actionClick",function(){var o=r.get("container").one(".group-invite-form");if(o){var a=o.get("value");if(a.length>0){var u={group_id:s,message:a,accept_rules:!0};t.callAPI("flickr.groups.joinRequest",u).then(function(t){e.config.win.location.reload()},function(o){var s="";s=o&&7===o.code?n.intlMessage({intlName:"groups.GROUP_INVITE_PENDING",groupName:e.Escape.html(i.title)}):"message"in o?o.message:n.intlMessage({intlName:"common.ERROR"}),new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"common.ERROR"}),message:s,actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1}).show()})}else setTimeout(function(){new e.Views.FluidModal({appContext:t,title:n.intlMessage({intlName:"common.ERROR"}),message:n.intlMessage({intlName:"groups.GROUP_INVITE_EMPTY_MESSAGE"}),actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1}).show()},300)}}),r.on("activated",function(){var e=r.get("container"),t=e.one("textarea")||!1;e&&t&&t.focus()}),r.show()},getJoinStatus:function(){var e=!1,n=!1,o=!1,s=!1,r=!1,a=t&&t.getViewer(),u=a&&a.signedIn;return e=i.isMember,r=i.isInvited,o=i.hasPendingRequestToJoin,n=2===i.privacy,s=i.isAdmin,{signedIn:u,canJoin:!e&&!o,hasJoined:e,hasRequested:o,isInvited:r,requiresRequest:n,isAdmin:s}},convertGroupInfoModel:function(e){var t=o.useSearchModel?e:e.getValue("group");i={title:t.getValue("title"),id:t.getValue("id"),memberCount:t.getValue("memberCount"),isMember:t.getValue("isMember"),isModerator:t.getValue("isModerator"),isAdmin:t.getValue("isAdmin"),privacy:t.getValue("privacy"),isInvited:e.getValue("isInvited"),hasPendingRequestToJoin:e.getValue("hasPendingRequestToJoin"),secureRules:e.getValue("secureRules")}},getInfo:function(){return{groupAttrs:i,joinStatus:this.getJoinStatus()}},toggleMuteGroup:function(t){var n={object_id:r,object_type:1,pref_type:"GroupBatch",pref_val:t?0:1};return this.insertUserPrefs(n).then(function(n){e.fire("groupStatusHelper:groupMuteToggled",{groupId:r,isMuted:t}),e.fire("groupStatusHelper:groupStatusChanged",{groupId:r})})},insertUserPrefs:function(e){return t.callAPI("flickr.feed.preferences.insertUserPreferences",e)},update:function(){this.convertGroupInfoModel(s)},declineInvite:function(){return s.declineInvite()}};return e.augment(u,e.EventTarget),u}},"@VERSION@",{requires:["event-custom","template-lib-helper","hermes-template-join-group-invite-form"]});YUI.add("base-notification-item-view",function(t,i){var e=require("hermes-core/flog")(i);t.namespace("Views")[this.name]=t.Base.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,additionalViewClasses:function(){return["base-notification-item"]},initializer:function(i){this.params=i,this.activityItem=i.activityItem,this.notificationsHelper=new t.NotificationsHelper(this.appContext)},loadState:function(){return t.Promise.resolve()},buildContainer:function(){var t=this.notificationsHelper.getTemplateHtml(this.activityItem);this.setContainerHTML(t)},activate:function(){var i=this.get("container").one(".notification-item");return i&&(i.toggleClass("unseen",!this.activityItem.isSeen),i.toggleClass("muted",this.activityItem.isMuted),this.registerEventHandler(i.on("click",this.handleAnalyticsClicks.bind(this))),this.setupContextMenu()),t.Promise.resolve(this)},handleContextMenuClick:function(){var i,e,n,a=this;this.menuConfigData&&(e=(i=this.notificationsHelper.getContextMenuConfig({item:this.params.activityItem,ctxMenuItems:this.menuConfigData})).map(function(t){return{text:t.text,value:t.actionId}}),(n=new t.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,observePageResize:!0,anchorOffsetHorizontal:12,anchorOffsetVertical:0,width:250,dismissOnOverlayClick:!0,anchorElement:this.contextMenuButton,menuItems:e,positionFixed:!0,closeOnScroll:!0,classList:"over-modal notification-context-menu",overlayClassList:"over-modal"})).show(),this.registerEventHandler(n.on("selected",function(t){var e=i.find(function(i){return i.actionId===t.menuItem.value}),o=a.get("container");t.analyticsLocation=o.ancestor(".notifications-panel-view")?"panel":"page",e.onSelected(t),n.close()})))},setupContextMenu:function(){var i=this,n=this.get("container"),a=this.params.activityItem;if(this.contextMenuButton=n.one(".notification-context-menu-button"),this.contextMenuButton)return this.registerEventHandler(this.contextMenuButton.on("click",this.handleContextMenuClick.bind(this))),this.notificationsHelper.loadContextMenuConfig(a).then(function(t){i.menuConfigData=t}).catch(function(i){return e.error({err:i}),t.Promise.resolve()})},handleAnalyticsClicks:function(t){var i=t.target;i.ancestor(".headline-container",!0)&&"A"===i.get("tagName").toUpperCase()?this.beaconAnalytics(this.activityItem,"Headline Click"):i.ancestor(".notification-photo-thumb",!0)?this.beaconAnalytics(this.activityItem,"Photo Thumb Click"):i.ancestor(".avatar",!0)&&!i.ancestor(".photo-thumb",!0)?this.beaconAnalytics(this.activityItem,"Avatar Click"):i.ancestor(".notification-context-menu-button",!0)&&this.beaconAnalytics(this.activityItem,"Context Menu Click")},beaconAnalytics:function(i,e){var n=this.get("container").ancestor(".notifications-panel-view")?"panel":"page";t.Analytics.setDataLayerProp("notifications.notificationType",i.type),t.Analytics.setDataLayerProp("notifications.actionType",e),t.Analytics.setDataLayerProp("notifications.location",n),t.Analytics.sendClick("","Notification Action"),t.Analytics.setDataLayerProp("notifications.notificationType",""),t.Analytics.setDataLayerProp("notifications.actionType",""),t.Analytics.setDataLayerProp("notifications.location","")}})},"@VERSION@",{requires:["flickr-view"],langBundles:["common","relative-dates","notifications"]});YUI.add("hermes-template-follow",function(n,l){var a=n.Template.Handlebars.revive({1:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showNoButton:l,{name:"if",hash:{},fn:n.program(2,e,0),inverse:n.program(4,e,0),data:e}))?s:""},2:function(n,l,a,t,e){return""},4:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showUnblockButton:l,{name:"if",hash:{},fn:n.program(5,e,0),inverse:n.program(7,e,0),data:e}))?s:""},5:function(n,l,a,t,e){return"\t\t\t<button class='follow alt'>"+n.escapeExpression((a.intlMessage||l&&l.intlMessage||a.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.UNBLOCK"},data:e}))+"</button>\n"},7:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showFollowingButton:l,{name:"if",hash:{},fn:n.program(8,e,0),inverse:n.program(10,e,0),data:e}))?s:""},8:function(n,l,a,t,e){return'\t\t\t\t<button class="follow is-following mini"><span class="drop-icon">▾</span></button>\n'},10:function(n,l,a,t,e){return'\t\t\t\t<button class="follow mini"></button>\n'},12:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.isFluid:l,{name:"if",hash:{},fn:n.program(13,e,0),inverse:n.program(23,e,0),data:e}))?s:""},13:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showNoButton:l,{name:"if",hash:{},fn:n.program(2,e,0),inverse:n.program(14,e,0),data:e}))?s:""},14:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showUnblockButton:l,{name:"if",hash:{},fn:n.program(15,e,0),inverse:n.program(17,e,0),data:e}))?s:""},15:function(n,l,a,t,e){return"\t\t\t\t<button class='follow alt'>"+n.escapeExpression((a.intlMessage||l&&l.intlMessage||a.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.UNBLOCK"},data:e}))+"</button>\n"},17:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showFollowingButton:l,{name:"if",hash:{},fn:n.program(18,e,0),inverse:n.program(21,e,0),data:e}))?s:""},18:function(n,l,a,t,e){var s,o=null!=l?l:{};return'\t\t\t\t\t<button class="follow is-following '+(null!=(s=a.if.call(o,null!=l?l.isOnDark:l,{name:"if",hash:{},fn:n.program(19,e,0),inverse:n.noop,data:e}))?s:"")+'">'+n.escapeExpression((a.intlMessage||l&&l.intlMessage||a.helperMissing).call(o,{name:"intlMessage",hash:{intlName:null!=l?l.followingIntlKey:l},data:e}))+'<span class="drop-icon">▾</span></button>\n'},19:function(n,l,a,t,e){return"white"},21:function(n,l,a,t,e){var s,o=null!=l?l:{};return'\t\t\t\t\t<button class="follow '+(null!=(s=a.if.call(o,null!=l?l.isOnDark:l,{name:"if",hash:{},fn:n.program(19,e,0),inverse:n.noop,data:e}))?s:"")+'">'+n.escapeExpression((a.intlMessage||l&&l.intlMessage||a.helperMissing).call(o,{name:"intlMessage",hash:{intlName:null!=l?l.followIntlKey:l},data:e}))+"</button>\n"},23:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showNoButton:l,{name:"if",hash:{},fn:n.program(2,e,0),inverse:n.program(24,e,0),data:e}))?s:""},24:function(n,l,a,t,e){var s;return'\t\t\t<span class="relationship">\n'+(null!=(s=a.if.call(null!=l?l:{},null!=l?l.showUnblockButton:l,{name:"if",hash:{},fn:n.program(2,e,0),inverse:n.program(25,e,0),data:e}))?s:"")+"\t\t\t</span>\n"},25:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.showFollowingButton:l,{name:"if",hash:{},fn:n.program(26,e,0),inverse:n.program(28,e,0),data:e}))?s:""},26:function(n,l,a,t,e){return"\t\t\t\t\t\t<button class='unfluid follow is-following ui-button ui-button-icon ui-button-transparent ui-button-dropdown'><span>"+n.escapeExpression((a.intlMessage||l&&l.intlMessage||a.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.FOLLOWING"},data:e}))+"</span></button>\n"},28:function(n,l,a,t,e){return"\t\t\t\t\t\t<button class='unfluid follow ui-button ui-button-icon'><span>"+n.escapeExpression((a.intlMessage||l&&l.intlMessage||a.helperMissing).call(null!=l?l:{},{name:"intlMessage",hash:{intlName:"common.FOLLOW"},data:e}))+"</span></button>\n"},compiler:[7,">= 4.0.0"],main:function(n,l,a,t,e){var s;return null!=(s=a.if.call(null!=l?l:{},null!=l?l.isOnMobile:l,{name:"if",hash:{},fn:n.program(1,e,0),inverse:n.program(12,e,0),data:e}))?s:""},useData:!0}),t={};n.Array.each([],function(l){var a=n.Template.get("hermes/"+l);a&&(t[l]=a)}),n.Template.register("hermes/follow",function(l,e){return e=e||{},e.partials=e.partials?n.merge(t,e.partials):t,a(l,e)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-signup-modal",function(a,e){var n=a.Template.Handlebars.revive({1:function(a,e,n,s,l){var i;return" "+a.escapeExpression("function"==typeof(i=null!=(i=n.signUpHeaderClass||(null!=e?e.signUpHeaderClass:e))?i:n.helperMissing)?i.call(null!=e?e:{},{name:"signUpHeaderClass",hash:{},data:l}):i)},3:function(a,e,n,s,l){var i;return" style=\"background-image:url('"+a.escapeExpression("function"==typeof(i=null!=(i=n.signUpHeaderImage||(null!=e?e.signUpHeaderImage:e))?i:n.helperMissing)?i.call(null!=e?e:{},{name:"signUpHeaderImage",hash:{},data:l}):i)+"')\""},compiler:[7,">= 4.0.0"],main:function(a,e,n,s,l){var i,t,r=null!=e?e:{},p=n.helperMissing,g=a.escapeExpression;return'<div class="signup-modal-body">\n\t<div class="head'+(null!=(i=n.if.call(r,null!=e?e.signUpHeaderClass:e,{name:"if",hash:{},fn:a.program(1,l,0),inverse:a.noop,data:l}))?i:"")+'"'+(null!=(i=n.if.call(r,null!=e?e.signUpHeaderImage:e,{name:"if",hash:{},fn:a.program(3,l,0),inverse:a.noop,data:l}))?i:"")+'></div>\n\t<h3 class="signup-title">'+g("function"==typeof(t=null!=(t=n.signUpTitle||(null!=e?e.signUpTitle:e))?t:p)?t.call(r,{name:"signUpTitle",hash:{},data:l}):t)+'</h3>\n\t<p class="signup-message">'+g("function"==typeof(t=null!=(t=n.signUpMessage||(null!=e?e.signUpMessage:e))?t:p)?t.call(r,{name:"signUpMessage",hash:{},data:l}):t)+'</p>\n\t<button class="large action signup-button">'+g((n.intlMessage||e&&e.intlMessage||p).call(r,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:l}))+'</button>\n</div>\n<div class="signup-modal-footer">\n\t<span>'+g((n.intlMessage||e&&e.intlMessage||p).call(r,{name:"intlMessage",hash:{intlName:"common.HAVE_A_FLICKR_ACCOUNT"},data:l}))+'</span>\n\t<a href="#" class="signin-link">'+g((n.intlMessage||e&&e.intlMessage||p).call(r,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:l}))+"</a>\n</div>\n"},useData:!0}),s={};a.Array.each([],function(e){var n=a.Template.get("hermes/"+e);n&&(s[e]=n)}),a.Template.register("hermes/signup-modal",function(e,l){return l=l||{},l.partials=l.partials?a.merge(s,l.partials):s,n(e,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("signup-modal-view",function(s,i){"use strict";s.namespace("Views").SignUpModal=s.FlickrView.create(this.name,s.Views.FluidModal,[],{initializer:function(s){return s.signUpHeaderClass||(s.signUpHeaderClass=""),this.set("showFooter",!1),this.set("showHeader",!1),this.set("showButtonFlavorText",!1),this.set("showButtons",!1),this.set("showActionButton",!1),this.set("showCancelButton",!1),this.set("signUpHeaderClass",s.signUpHeaderClass),this.set("signUpHeaderImage",s.signUpHeaderImage),this.set("signUpTitle",s.signUpTitle),this.set("signUpMessage",s.signUpMessage),this.set("beaconPrefix",s.beaconPrefix),this.set("classList","signup-modal"),this},buildContainer:function(){if(!this.alreadyShowingModal){s.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalShow");var i={signUpHeaderClass:this.get("signUpHeaderClass"),signUpHeaderImage:this.get("signUpHeaderImage"),signUpTitle:this.get("signUpTitle"),signUpMessage:this.get("signUpMessage")};this.set("htmlMessage",this.templates("signup-modal")(i)),this.constructor.superclass.buildContainer.call(this)}return this},activate:function(){return this.get("container").one(".signup-button").on("click",this.handleAction.bind(this)),this.get("container").one(".signin-link").on("click",this.handleSignIn.bind(this)),this.constructor.superclass.activate.call(this),this},handleSignIn:function(i){s.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalSignInClick"),this.fire("signInClick",i),this.constructor.superclass.handleAction.call(this)},handleAction:function(i){s.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalSignUpClick"),this.fire("signUpClick",i),this.constructor.superclass.handleAction.call(this)},handleCancel:function(i){s.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"CancelClick"),this.constructor.superclass.handleCancel.call(this)}})},"@VERSION@",{requires:["flickr-view","fluid-modal-view","hermes-template-signup-modal"],optionalRequires:["fluid"],langBundles:["common"]});